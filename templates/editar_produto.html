{% extends 'layout.html' %}
{% block title %}Editar Produto{% endblock %}
{% block content %}
<div class="page-header">
     <a href="{{ url_for('admin_cardapio') }}" class="back-button">← Voltar para o Cardápio</a>
</div>

<div class="admin-panel">
    <h2 class="admin-title">✏️ Editando Produto: {{ produto.nome }}</h2>
    
    <form method="POST" action="{{ url_for('editar_produto', produto_id=produto.id) }}" enctype="multipart/form-data">
        <div class="form-row">
            <div class="form-group">
                <label for="productName">Nome do Produto</label>
                <input type="text" id="productName" name="productName" value="{{ produto.nome }}" required>
            </div>
            <div class="form-group">
                <label for="productPrice">Preço (R$)</label>
                <input type="number" id="productPrice" name="productPrice" step="0.01" value="{{ produto.preco }}" required>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label for="productCategory">Categoria</label>
                <select id="productCategory" name="productCategory" required>
                    {% for cat in categorias %}
                    <option value="{{ cat.id }}" {% if cat.id == produto.categoria_id %}selected{% endif %}>
                        {{ cat.nome }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="productImage">Trocar Imagem (opcional)</label>
                <input type="file" id="productImage" name="productImage" accept="image/*">
                {% if produto.imagem_url %}
                <p style="margin-top: 0.5rem; font-size: 0.9rem;">Imagem atual: {{ produto.imagem_url }}</p>
                {% endif %}
            </div>
        </div>
        <div class="form-group">
            <label for="productDescription">Descrição</label>
            <textarea id="productDescription" name="productDescription" rows="3">{{ produto.descricao or '' }}</textarea>
        </div>
        <button type="submit" class="btn">Salvar Alterações</button>
    </form>
</div>
{% endblock %}